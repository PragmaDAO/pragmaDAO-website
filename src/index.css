@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global selection override to prevent white backgrounds */
::selection {
  background-color: #4338ca !important;
  color: white !important;
}

body {
  margin: 0;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.markdown-body ul {
  list-style-type: disc;
  padding-left: 1.5em; /* Adjust as needed for spacing */
}

.hint-box {
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: pre-wrap; /* Ensures that whitespace is preserved but wraps */
  max-width: 100%; /* Ensures it doesn't overflow its container */
}

.hint-box pre,
.hint-box code {
  white-space: pre-wrap !important;
}

/* CodeMirror adjustments */
.cm-editor {
  height: 100%; /* Ensure editor takes full height of its container */
  text-align: left; /* Ensure text is left-aligned */
  caret-color: white !important; /* Fallback for cursor color */
}

.cm-editor .cm-scroller {
  background-color: #1a202c; /* Dark background color, similar to gray-900 */
}

.cm-editor .cm-content {
  color: #f0f0f0; /* Brighter than previous, but not pure white */
  caret-color: white !important; /* Make the cursor white, with high priority */
  font-size: 1rem; /* Make the text the same size as lesson description */
}

.cm-editor .cm-line {
  background-color: transparent; /* Ensure line background is transparent */
}

.cm-gutters {
  background-color: #1a202c !important; /* Match IDE background */
  color: #e2e8f0; /* Light color for line numbers */
  border-right: none !important; /* Remove the white line */
}

.cm-cursor {
  border-left-color: white !important;
}

.cm-keyword {
  color: #a78bfa !important; /* Brighter purple for keywords */
}

/* Boolean literals (true/false) with high contrast colors */
.cm-literal {
  color: #fde047 !important; /* Bright yellow for true/false */
  font-weight: 600 !important; /* Make them bold */
}

/* More specific targeting for boolean values */
.cm-atom {
  color: #fde047 !important; /* Bright yellow for atomic values like true/false */
  font-weight: 600 !important;
}

/* Numbers and boolean literals */
.cm-number {
  color: #34d399 !important; /* Bright green for numbers */
  font-weight: 500 !important;
}

/* Solidity-specific boolean targeting */
.cm-builtin {
  color: #fde047 !important; /* Bright yellow for built-in values like true/false */
  font-weight: 700 !important;
}

/* Additional targeting for any boolean-like tokens */
.cm-variable-2 {
  color: #fde047 !important; /* Sometimes booleans are tagged as variable-2 */
  font-weight: 600 !important;
}

/* String literals for contrast */
.cm-string {
  color: #10b981 !important; /* Bright green for strings */
}

/* Aggressive targeting for all possible boolean token types */
.cm-editor span[title="true"],
.cm-editor span[title="false"],
.cm-editor .shtk-true,
.cm-editor .shtk-false,
.cm-editor .cm-token.cm-keyword.cm-true,
.cm-editor .cm-token.cm-keyword.cm-false {
  color: #fbbf24 !important;
  font-weight: 700 !important;
}

/* Catch-all for any span containing boolean text */
.cm-content span {
  /* This will be handled by JavaScript if needed */
}

.cm-activeLineGutter {
  color: #e2e8f0 !important; /* Ensure active line number stays the same color */
  background-color: transparent !important; /* Ensure background is transparent */
}

.cm-activeLine {
  background-color: #2a303c !important; /* Slightly lighter background for active line */
}

.cm-activeLine .cm-gutterElement {
  background-color: #1a202c !important; /* Ensure active line gutter background matches overall gutter */
}

.cm-selectionBackground {
  background-color: #4338ca !important; /* Distinct indigo color for text selection */
  min-height: 1.2em !important; /* Ensure minimum height for small selections */
}

.cm-focused .cm-selectionBackground {
  background-color: #4338ca !important; /* Ensure selection is visible when editor is focused */
}

.cm-line.cm-selectionMatch {
  background-color: #4338ca !important; /* Highlight for any part of line selection */
}

/* More specific selection styling for partial line selections */
.cm-editor .cm-selectionLayer .cm-selectionBackground {
  background-color: #4338ca !important;
  border-radius: 2px;
}

/* Ensure any selected content within a line gets highlighted */
.cm-content[contenteditable="true"] {
  caret-color: white !important;
}

/* Override default browser selection to prevent white background */
.cm-editor ::selection {
  background-color: #4338ca !important;
  color: white !important;
}

.cm-content ::selection {
  background-color: #4338ca !important;
  color: white !important;
}

/* Force CodeMirror selection to always use indigo */
.cm-editor .cm-content ::selection {
  background-color: #4338ca !important;
  color: white !important;
}

/* Ensure boolean literals remain visible when selected */
.cm-selectionBackground .cm-literal,
.cm-selectionBackground .cm-atom,
.cm-selectionBackground .boolean-highlight {
  color: #fef3c7 !important; /* Bright amber for selected booleans */
  font-weight: 700 !important;
}

/* Ensure numbers remain visible when selected */
.cm-selectionBackground .cm-number {
  color: #dcfce7 !important; /* Light green for selected numbers */
  background-color: #16a34a !important; /* Darker green background */
  border-radius: 2px !important;
  padding: 0 2px !important;
  font-weight: 600 !important;
}

/* Modal animations */
@keyframes modal-enter {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.animate-modal-enter {
  animation: modal-enter 0.3s ease-out;
}
